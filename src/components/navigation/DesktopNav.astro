---
import ProjectsDropdown from './ProjectsDropdown.astro';

// Obtener la ruta actual para resaltar el ítem activo
const currentPath = Astro.url.pathname;
console.log('Current path:', currentPath); // Para depuración

// Detectar la página activa normalizando las rutas
const isHomePage = currentPath === '/' || currentPath === '';
const isAboutPage = currentPath.startsWith('/about') || currentPath.startsWith('/sobre-nosotros') || currentPath.includes('nosotros');
const isContactPage = currentPath.includes('contacto') || currentPath.includes('contact');
const isProjectsPage = currentPath.includes('/centro') || 
                      currentPath.includes('/este') || 
                      currentPath.includes('/oeste') ||
                      currentPath.includes('/athas') ||
                      currentPath.includes('/gaudi') ||
                      currentPath.includes('/alai') ||
                      currentPath.includes('/amitie') ||
                      currentPath.includes('/lagun') ||
                      currentPath.includes('/filia') ||
                      currentPath.includes('/casas-este') ||
                      currentPath.includes('/verona') ||
                      currentPath.includes('/piamonte') ||
                      currentPath.includes('/siena') ||
                      currentPath.includes('/provenza') ||
                      currentPath.includes('/proyecto');
---

<nav class="hidden xl:flex items-center space-x-6 w-full justify-center">
  <div class="flex flex-col items-center">
    <a href="/" class={`font-helvetica font-medium px-2.5 py-1 text-[var(--secondary)] transition-all duration-300 hover:text-[var(--primary)] hover:scale-105 ${isHomePage ? 'text-[var(--primary)] font-bold' : ''}`}>
      inicio
    </a>
    {isHomePage && <div class="w-10 h-1 bg-[var(--primary)] mx-auto mt-0"></div>}
  </div>
  
  <div class="flex flex-col items-center">
    <a href="/about" class={`font-helvetica font-medium px-2.5 py-1 text-[var(--secondary)] transition-all duration-300 hover:text-[var(--primary)] hover:scale-105 ${isAboutPage ? 'text-[var(--primary)] font-bold' : ''}`}>
      sobre nosotros
    </a>
    {isAboutPage && <div class="w-10 h-1 bg-[var(--primary)] mx-auto mt-0"></div>}
  </div>
  
  <div class="flex flex-col items-center">
    <ProjectsDropdown isActive={isProjectsPage} />
    {isProjectsPage && <div class="w-10 h-1 bg-[var(--primary)] mx-auto mt-0"></div>}
  </div>
  
  <div class="flex flex-col items-center">
    <a href="/contacto" class={`font-helvetica font-medium px-2.5 py-1 text-[var(--secondary)] transition-all duration-300 hover:text-[var(--primary)] hover:scale-105 ${isContactPage ? 'text-[var(--primary)] font-bold' : ''}`}>
      contáctenos
    </a>
    {isContactPage && <div class="w-10 h-1 bg-[var(--primary)] mx-auto mt-0"></div>}
  </div>
</nav>
